<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Tableturf Competetive Queue</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./assets/fontawesome-free-6.5.2-web/css/all.min.css">
  </head>
  <body class="body">
    <main class="main">
        <p id="loading-message">Loading...</p>
        <div id="match-info">
            <p id="players-list">Player 1 vs Player 2</p>
            <p id="current-striker"></p>
            <div id="ruleset">
                <p id="set-length"><i class="fa-solid fa-gamepad"></i>&nbsp;: 5 games</p>
                <p id="timer-duration"><i class="fa-solid fa-stopwatch"></i>&nbsp;: 50 seconds</p>
            </div>
        </div>
        <div id="player-content">
            <div id="player1-info" class="player-info">
              <p id="player1-name"><i class="fa-brands fa-discord"></i>&nbsp;Player 1 Name</p>
              <span>Discord profile pic here I guess</span>
              <p id="player1-score">Score: 0</p>
              <button id="player1-victory-button" class="player-victory-button" value="player1">Mark as winner</button>
            </div>
            <div id="player2-info" class="player-info">
              <p id="player2-name"><i class="fa-brands fa-discord"></i>&nbsp;Player 2 Name</p>
              <span>Discord profile pic here I guess</span>
              <p id="player2-score">Score: 0</p>
              <button id="player2-victory-button" class="player-victory-button" value="player2">Mark as winner</button>
            </div>
        </div>
        <div id="match-chat-content">
            <div id="match-chat-log">
                <div class="match-chat-message"><span class="match-chat-player match-chat-current-player">zeb:&nbsp;</span>Hello!</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-current-player">zeb:&nbsp;</span>I have a room up</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-opponent-player">Ljovynn:&nbsp;</span>Hi</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-opponent-player">Ljovynn:&nbsp;</span>gg</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-current-player">zeb:&nbsp;</span>gg</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-current-player">zeb:&nbsp;</span>gg</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-opponent-player">Ljovynn:&nbsp;</span>gg</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-opponent-player">Ljovynn:&nbsp;</span>gg</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-current-player">zeb:&nbsp;</span>gg</div>
                <div class="match-chat-message"><span class="match-chat-player match-chat-current-player">zeb:&nbsp;</span>This is just a pretty long message to test wordwrap lorem ipsum dolor sit amet consectitur is that how it goes?</div>
            </div>
            <div id="match-chat-inputs">
                <input type="text" id="match-chat-input" /><button id="match-chat-button">Send</button>
            </div>
        </div>
        <div id="stages-list" class="stages-list">
                <div id="stage-main-street" class="stage starter-stage stage-selectable">
                    <h3>Main Street</h3>
                    <img  src="./assets/images/Main-Street-Icon.png" />
                </div>
                <div id="stage-thunder-point" class="stage starter-stage stage-selectable">
                    <h3>Thunder Point</h3>
                    <img  src="./assets/images/Thunder-Point-Icon.png" />
                </div>
                <div id="stage-x-marks" class="stage stage-stricken">
                    <h3>X Marks The Garden</h3>
                    <img src="./assets/images/X-Marks-Icon.png" />
                </div>
                <div id="stage-square-squared" class="stage starter-stage stage-selectable">
                    <h3>Square Squared</h3>
                    <img  src="./assets/images/Square-Squared-Icon.png" />
                </div>
                <div id="stage-lakefront" class="stage starter-stage stage-selectable">
                    <h3>Lakefront Property</h3>
                    <img  src="./assets/images/Lakefront-Icon.png" />
                </div>
                    <div id="stage-gemini" class="stage stage-stricken">
                    <h3>Double Gemini</h3>
                    <img  src="./assets/images/Double-Gemini-Icon.png" />
                </div>
                    <div id="stage-river-drift" class="stage starter-stage stage-selectable">
                    <h3>River Drift</h3>
                    <img src="./assets/images/River-Drift-Icon.png" />
                </div>
                    <div id="stage-box-seats" class="stage stage-stricken">
                    <h3>Box Seats</h3>
                    <img src="./assets/images/Box-Seats-Icon.png" />
                </div>
                <div id="stage-girder" class="stage stage-stricken">
                    <h3>Girder For Battle</h3>
                    <img  src="./assets/images/Girder-Icon.png" />
                </div>
                <div id="stage-cracker-snap" class="stage stage-stricken">
                    <h3>Cracker Snap</h3>
                    <img  src="./assets/images/Cracker-Snap-Icon.png" />
                </div>

                <div id="stage-mansion" class="stage stage-stricken">
                    <h3>Mask Mansion</h3>
                    <img  src="./assets/images/Mask-Mansion-Icon.png" />
                </div>
                <div id="stage-thicket" class="stage stage-stricken">
                    <h3>Sticky Thicket</h3>
                    <img  src="./assets/images/Sticky-Thicket-Icon.png" />
                </div>
                <div id="stage-pedal" class="stage stage-stricken">
                    <h3>Pedal to the Metal</h3>
                    <img  src="./assets/images/Pedal-Icon.png" />
                </div>
                <div id="stage-two-lane" class="stage stage-stricken">
                    <h3>Two-Lane Splattop</h3>
                    <img  src="./assets/images/Two-Lane-Icon.png" />
                </div>
                <div id="stage-over-the-line" class="stage stage-stricken">
                    <h3>Over the Line</h3>
                    <img  src="./assets/images/Over-the-Line-Icon.png" />
                </div>
            </div>
            <p id="game-messages">Please wait for your opponent.</p>
            <div id="strike-content">
                <div id="strike-info"><span id="strike-amount">1</span> stage strike remaining.</div>
                <div>(Alternate text for final selection)Please select the stage to play on</div>
                <button id="confirm-map-selection">Confirm Strikes</button>
            </div>
        <div id="play-game">
            <p id="game-info"></p>
            <p></p>
        </div>
        <a id="requeue-button" href="/queue"><button>Queue Again</button></a>
    </main>
  </body>
  <script>
        // Create variables for all the elements we need to interact with
        const selectableStages = document.getElementsByClassName('stage-selectable');
        const strikeButton = document.getElementById('confirm-map-selection');
        const victoryButtons = document.getElementsByClassName('stage-selectable');
        const chatInput = document.getElementById('match-chat-input');
        const chatSend = document.getElementById('match-chat-button');

        // Set event listeners for interactable elements

        // Stage selection event listener
        for (let stage of selectableStages ) {
            stage.addEventListener('click', (e) => {
                stage.classList.toggle('stage-selected');

                // Add/Remove stage from the list of strikes that will be sent off to the server when the confirm strikes button is selected
            });
        }

        // Victory button click listener
        for (let victoryButton of victoryButtons ) {
            victoryButton.addEventListener('click', (e) => {
                console.log('Marked victory for ' + victoryButton.value);
                // Send off the victory mark event for the selected player and wait for the other player to submit the victor
            });
        }

        // Chat send listener
        chatSend.addEventListener('click', (e) => {
            var chatMessage = chatInput.value;
            console.log( 'Player is sending the message: ' + chatMessage );
        });
        
        // Confirm strikes/Select map to play on listener
        strikeButton.addEventListener('click', (e) => {
            var selectedStages = document.getElementsByClassName('stage-selected');
            for (let stage of selectedStages ) {
                // Change the classes to remove selected stage from eligible selections
                stage.classList.remove('stage-selected');
                stage.classList.remove('stage-selectable');
                stage.classList.add('stage-stricken');

                // Send off strike data to the server
            } 
        });
    </script>
</html>